"use strict";(()=>{var e={};e.id=331,e.ids=[331],e.modules={6037:e=>{e.exports=require("mongoose")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,o)=>{Object.defineProperty(o,"M",{enumerable:!0,get:function(){return function e(o,t){return t in o?o[t]:"then"in o&&"function"==typeof o.then?o.then(o=>e(o,t)):"function"==typeof o&&"default"===t?o:void 0}}})},313:(e,o,t)=>{t.r(o),t.d(o,{config:()=>d,default:()=>l,routeModule:()=>u});var n={};t.r(n),t.d(n,{default:()=>c});var r=t(9947),i=t(2706),a=t(6762),s=t(648);async function c(e,o){if("GET"===e.method)try{let e=await (0,s.RR)("mission");e&&e.length>0?o.status(200).json(e):o.status(404).json({message:"No missions found"})}catch(e){console.error("Error fetching mission data:",e),o.status(500).json({message:"Failed to fetch mission data"})}else o.status(405).json({message:"Method not allowed!"})}let l=(0,a.M)(n,"default"),d=(0,a.M)(n,"config"),u=new r.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/mission",pathname:"/api/mission",bundlePath:"",filename:""},userland:n})},648:(e,o,t)=>{t.d(o,{$V:()=>a,R9:()=>s,RR:()=>c});var n=t(6037),r=t.n(n);let i=null,a=async()=>{if(i)return i;try{return console.log("Attempting to connect to MongoDB..."),await r().connect(process.env.MONGODB_URI),console.log("Successfully connected to MongoDB!"),i=r().connection,console.log("Connected to MongoDB:",1===r().connection.readyState),i}catch(e){throw console.error("Error connecting to MongoDB:",e),Error("Failed to connect to MongoDB")}},s=async()=>{try{let e=await a();if(!e.db)throw Error("Database connection failed: db.db is undefined");return(await e.db.listCollections().toArray()).map(e=>e.name)}catch(e){throw console.error("Error getting collections:",e),Error("Failed to get collections")}},c=async e=>{try{let o=await a();if(!o.db)throw Error("Database connection failed: db.db is undefined");let t=o.db.collection(e);return await t.find({}).toArray()}catch(e){throw console.error("Error fetching collection data:",e),Error("Failed to fetch collection data")}}},2706:(e,o)=>{Object.defineProperty(o,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9947:(e,o,t)=>{e.exports=t(5600)}};var o=require("../../webpack-api-runtime.js");o.C(e);var t=o(o.s=313);module.exports=t})();